<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>ByGou 百购 - 大学生专属二手交易平台</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://cdn.jsdelivr.net/npm/remixicon@3.5.0/fonts/remixicon.css" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
</head>
<body>

    <div class="nav-wrapper">
        <nav class="navbar">
            <div style="display:flex; align-items:center; gap:24px;">
                <div class="logo">ByGou 百购</div>
                <div class="nav-links">
                    <a href="#cat" class="nav-link">分类</a>
                    <a href="#guide" class="nav-link">指南</a>
                </div>
            </div>
            
            <div style="display:flex; align-items:center; gap:12px;">
                <button onclick="toggleTheme()" class="icon-btn" title="切换主题"><i class="ri-moon-line"></i></button>
                <button id="navLoginBtn" class="btn-pill" onclick="openAuthModal('login')">登录</button>
                
                <div id="navUserArea" class="user-pill" style="display:none;" onclick="event.stopPropagation(); toggleUserMenu()">
                    <span id="userNameDisplay" class="user-name">同学</span>
                    <img id="userAvatarImg" src="" class="user-avatar">
                    <div class="user-dropdown-float" id="userDropdown">
                        <a href="#" onclick="showToast('功能开发中')"><i class="ri-file-list-2-line"></i> 我的发布</a>
                        <a href="#" onclick="showToast('暂无消息')"><i class="ri-message-3-line"></i> 消息通知</a>
                        <div class="divider"></div>
                        <a href="#" onclick="logout()" class="text-danger"><i class="ri-logout-box-r-line"></i> 退出登录</a>
                    </div>
                </div>
            </div>
        </nav>
    </div>

    <div class="mobile-tab-bar" id="mobileTabs">
        <div class="tab-item active" onclick="switchTab(this, 'home')"><i class="ri-home-5-line"></i><span>首页</span></div>
        <div class="tab-item" onclick="switchTab(this, 'cat')"><i class="ri-apps-2-line"></i><span>分类</span></div>
        <div class="tab-item" onclick="checkAuthAndAction()">
            <div class="tab-fab"><i class="ri-add-line"></i></div>
        </div>
        <div class="tab-item" onclick="switchTab(this, 'guide')"><i class="ri-compass-3-line"></i><span>指南</span></div>
        <div class="tab-item" onclick="handleMobileMine(this)"><i class="ri-user-smile-line"></i><span>我的</span></div>
    </div>

    <div class="container">
        <section class="hero">
            <div class="reveal">
                <div class="school-badge" onclick="openSchoolModal()">
                    <i class="ri-map-pin-user-fill" style="color:var(--primary)"></i> <span id="currentSchool">选择学校</span>
                </div>
                <h1 class="hero-title">百购校园<br>让价值流动起来</h1>
                <p class="hero-desc">100% 学生实名认证 · 极速面交 · 拒绝套路</p>
                <div class="search-bar">
                    <i class="ri-search-line search-icon"></i>
                    <input type="text" placeholder="搜一下: iPad, 教材, 吉他..." class="search-input">
                    <button class="btn-pill">搜索</button>
                </div>
            </div>
        </section>

        <section id="cat" class="reveal">
            <div class="section-header"><h3>热门分区</h3><span class="more-link">查看全部 <i class="ri-arrow-right-s-line"></i></span></div>
            <div class="bento-grid">
                <div class="bento-card span-2 row-2 bg-gradient-blue" onclick="checkAuthAndAction()">
                    <i class="ri-macbook-line card-bg-icon"></i>
                    <div class="card-content"><div class="card-title">数码产品</div><div class="card-sub">手机 / 平板 / 配件</div></div>
                    <div class="card-arrow"><i class="ri-arrow-right-line"></i></div>
                </div>
                <div class="bento-card bg-gradient-orange" onclick="checkAuthAndAction()">
                    <i class="ri-book-open-line card-bg-icon"></i><div class="card-content"><div class="card-title">教材资料</div></div>
                </div>
                <div class="bento-card bg-gradient-green" onclick="checkAuthAndAction()">
                    <i class="ri-bike-line card-bg-icon"></i><div class="card-content"><div class="card-title">校园代步</div></div>
                </div>
                 <div class="bento-card span-2 dark-card" onclick="checkAuthAndAction()">
                    <i class="ri-t-shirt-line card-bg-icon"></i>
                    <div class="card-content"><div class="card-title text-light">潮流衣物</div><div class="card-sub text-dim">球鞋 / 卫衣 / 配饰</div></div>
                    <div class="card-arrow light"><i class="ri-arrow-right-line"></i></div>
                </div>
            </div>
        </section>

        <section id="guide" class="reveal">
            <h3 class="section-header-title">避坑指南</h3>
            <div class="guide-scroll">
                <div class="guide-item" onclick="showToast('文章功能开发中')"><div class="guide-icon"><i class="ri-smartphone-line"></i></div><div><div class="guide-title">二手手机验机流程</div><div class="guide-sub">避免买到组装机</div></div></div>
                <div class="guide-item" onclick="showToast('文章功能开发中')"><div class="guide-icon"><i class="ri-alert-line"></i></div><div><div class="guide-title">防诈骗预警</div><div class="guide-sub">“先款后货”不可信</div></div></div>
                <div class="guide-item" onclick="showToast('文章功能开发中')"><div class="guide-icon"><i class="ri-t-shirt-line"></i></div><div><div class="guide-title">球鞋鉴定技巧</div><div class="guide-sub">三步辨别真假</div></div></div>
            </div>
        </section>

        <section id="contact" class="reveal">
            <div class="bento-grid">
                <div class="bento-card span-4" style="flex-direction: row; align-items: center; justify-content: space-between; min-height: 100px;">
                    <div><div class="card-title">遇到问题？</div><div class="card-sub">添加客服同学，或关注公众号反馈</div></div>
                    <button class="btn-pill primary" onclick="openQrModal()" style="display: flex; align-items: center; gap: 6px;">
                        <i class="ri-qr-code-line"></i> <span>联系我们</span>
                    </button>
                </div>
            </div>
        </section>

        <footer class="legal-footer">
            <p style="margin-bottom:6px; font-weight:600; opacity:0.9;">ByGou 百购 © 2025</p>
            <p>免责声明：本平台仅提供校园闲置信息发布服务，不介入资金交易。</p>
            <p>交易过程中请务必线下当面核验商品，谨防诈骗，风险自担。</p>
        </footer>
    </div>

    <div class="modal-wrap" id="authModal" onclick="closeModal(event, 'authModal')">
        <div class="modal-box">
            <div id="loginView">
                <h3 class="modal-title">登录 ByGou</h3>
                <input type="email" id="loginEmail" class="input-field" placeholder="学校邮箱" value="student@edu.cn">
                <input type="password" id="loginPwd" class="input-field" placeholder="密码" value="123456">
                <button onclick="handleLogin(event)" class="btn-pill full-width">立即登录</button>
                <div class="auth-switch">没有账号？ <span onclick="switchView('register')">去注册</span></div>
            </div>
            
            <div id="registerView" style="display:none;">
                <h3 class="modal-title">加入我们</h3>
                <input type="text" id="regName" class="input-field" placeholder="昵称">
                <input type="email" id="regEmail" class="input-field" placeholder="学校邮箱">
                <input type="password" id="regPwd" class="input-field" placeholder="设置密码">
                
                <div class="checkbox-wrapper">
                     <input type="checkbox" id="agreeChk">
                     <label for="agreeChk">我已阅读并同意 <span class="link-text" onclick="openAgreement(event)">《用户协议》</span></label>
                </div>

                <button onclick="handleRegister(event)" class="btn-pill full-width">注册并登录</button>
                <div class="auth-switch">已有账号？ <span onclick="switchView('login')">去登录</span></div>
            </div>
        </div>
    </div>
    
    <div class="modal-wrap" id="qrModal" onclick="closeModal(event, 'qrModal')">
        <div class="modal-box" style="text-align: center; max-width: 320px;">
            <h3 class="modal-title">关注 ByGou</h3>
            <p style="color:var(--text-sec); font-size:13px; margin-bottom:20px;">扫码联系客服 / 关注公众号</p>
            
            <div style="background:#fff; padding:15px; border-radius:20px; margin-bottom:20px; display:inline-block; border:1px solid var(--border-light);">
                <div id="qrcode"></div>
            </div>
            
            <button class="btn-pill full-width" onclick="closeModal(null, 'qrModal')">关闭</button>
        </div>
    </div>

    <div class="modal-wrap" id="agreementModal" onclick="closeModal(event, 'agreementModal')">
        <div class="modal-box" style="text-align: left; max-height: 70vh; display:flex; flex-direction:column;">
            <h3 class="modal-title">用户协议</h3>
            <div style="overflow-y: auto; flex:1; padding-right:5px; font-size:13px; color:var(--text-main); line-height:1.6;">
                <p><strong>重要提示：</strong>请您仔细阅读以下条款。</p><br>
                <p>1. <strong>身份认证</strong>：本平台仅限在校大学生使用。</p>
                <p>2. <strong>交易方式</strong>：平台提倡“线下当面交易，钱货当面两清”。</p>
                <p>3. <strong>资金安全</strong>：平台不提供资金托管，不经手任何交易款项。</p>
                <p>4. <strong>免责声明</strong>：本平台仅提供信息展示空间，不对交易物品的质量、真伪及合法性承担责任。产生纠纷请自行协商解决。</p>
                <p>5. <strong>违禁品</strong>：严禁发布法律法规禁止的物品。</p>
            </div>
            <button class="btn-pill full-width primary" style="margin-top:20px;" onclick="closeModal(null, 'agreementModal')">我已知晓</button>
        </div>
    </div>

    <div class="modal-wrap" id="schoolModal" onclick="closeModal(event, 'schoolModal')">
        <div class="modal-box">
            <h3 class="modal-title">选择分站</h3>
            <div style="display:flex; flex-direction:column; gap:8px;">
                <button class="school-opt active" onclick="selectSchool('北京大学')">北京大学 <i class="ri-check-line"></i></button>
                <button class="school-opt" onclick="selectSchool('清华大学')">清华大学</button>
                <button class="school-opt" onclick="selectSchool('复旦大学')">复旦大学</button>
            </div>
        </div>
    </div>

    <div id="toast"><i class="ri-information-fill" style="color:var(--primary)"></i> <span id="toastMsg">提示</span></div>

    <script src="script.js"></script>
</body>
</html>
